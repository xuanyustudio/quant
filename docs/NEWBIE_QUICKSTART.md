# 🎓 新手快速开始指南（$1K 测试版）

> **恭喜！** 你已经配置好新手友好模式，让我们一步步开始。

---

## ✅ 当前配置（已为你设置好）

```
💰 初始资金: $1,000
📊 选择配对: 3个最佳配对
💵 每次交易: $200
📈 仓位比例: 50%（保守）
🛡️ 最大回撤: 10%（触发暂停）
⚠️ 日亏损限制: $50
🔄 同时持仓: 最多2个
```

---

## 📋 第一步：运行回测（必须！）

**不要跳过这步！** 回测可以让你看到策略在历史数据上的表现。

```bash
# 回测2025年8月的数据
npm run stat-arb:backtest
```

**预计时间**: 20-40分钟（取决于网络速度）

**回测流程（重要！）**：
1. 分析所有币对，找出相关性最高的300个配对
2. **快速回测这300个配对**（不生成详细报告）
3. **按收益率排序**
4. **选出收益最好的前3名**
5. 为这前3名生成详细HTML报告
6. 保存所有300个配对的数据

⚠️ **关键点**：不是只测试3个，而是测试300个然后选最好的3个！

**回测完成后查看**：
- `output/` 文件夹中的HTML报告
- 查看每个配对的收益率、胜率、最大回撤
- 特别关注交易次数（5-20次为理想）

---

## 📊 第二步：分析和选择配对

回测完成后，系统会提示你运行：

```bash
npm run stat-arb:portfolio ./output/backtest_results_[时间戳].json 1000 conservative
```

**参数说明**：
- `backtest_results_xxx.json`: 回测结果文件（自动生成）
- `1000`: 你的总资金
- `conservative`: 保守型风险偏好

**你会得到**：

```
💰 资金分配方案：
   总资金: $1,000
   应急储备 (25%): $250  ← 绝不动用
   活跃交易 (55%): $550  ← 用于交易
   机动资金 (20%): $200  ← 备用

💼 选定配对详情

【排名 #1】ETH/USDT / BNB/USDT
  💰 分配资金: $250
  📊 每笔交易: $125
  📈 收益率: 8.23%（预期月收益）
  🎯 夏普比率: 1.65
  ✅ 胜率: 68.0%
  📉 最大回撤: 7.2%
  
【排名 #2】ADA/USDT / DOT/USDT
  💰 分配资金: $180
  📊 每笔交易: $90
  ...

【排名 #3】...
```

**⚠️ 重要检查项**：

| 指标 | 理想值 | 警告值 | 说明 |
|------|--------|--------|------|
| 收益率 | >5% | <3% | 低于3%不值得做 |
| 夏普比率 | >1.0 | <0.8 | 太低说明风险不值得 |
| 最大回撤 | <10% | >15% | 回撤太大风险高 |
| 胜率 | >55% | <50% | 低于50%像赌博 |
| 交易次数 | 8-20 | <5 或 >30 | 太少不稳定，太多成本高 |

---

## 🎯 第三步：选择你的配对

根据第二步的分析，你需要做一个决定：

### 方案A：保守（推荐）
**选择 TOP 2 配对**
- 只选择收益率最高且回撤最小的2个
- 每个配对 $275
- 总投入 $550（55%资金）

### 方案B：平衡
**选择 TOP 3 配对**
- 选择前3名
- 配对1: $250, 配对2: $180, 配对3: $120
- 总投入 $550（55%资金）

**我的建议：先从方案A开始！** 两个配对更容易监控。

---

## ⚙️ 第四步：纸上交易测试（强烈推荐）

在真实下单前，先模拟运行1-2周：

### 什么是纸上交易？
- 程序正常运行，分析信号
- **不实际下单**，只记录交易
- 观察实盘信号和回测是否一致

### 如何进行纸上交易？

1. **保持配置**：
```javascript
// config.js 中确保这两项为 false
enableLiveTrading: false,  // ✅ 不启用实盘
autoTrade: false,          // ✅ 不自动交易
```

2. **启动监控**：
```bash
npm run stat-arb
```

3. **观察日志**：
程序会每分钟扫描市场，显示：
```
📊 ETH/USDT / BNB/USDT
   Z-Score: 2.15
   信号: HOLD
   当前价格: ETH=$3500, BNB=$700
```

当Z-Score超过阈值（3.1）时，会显示：
```
🎯 OPEN_SHORT 信号
   Z-Score: 3.45
   价差偏高，做空价差
```

4. **手动记录**：
将每个交易信号记录下来，包括：
- 时间
- 配对
- 信号类型
- Z-Score值
- 价格

5. **每天复盘**：
查看日志 `logs/combined.log`，统计：
- 今天有几个交易信号？
- 如果真实交易，盈亏多少？
- 信号质量如何？

### 纸上交易期间你应该观察：

✅ **好的信号**：
- Z-Score超过3.1时价差确实很大
- 平仓时Z-Score回归到0附近
- 持仓时间在12-48小时
- 大部分交易盈利

⚠️ **警告信号**：
- Z-Score频繁触发（每天>5次）
- 平仓后价差继续扩大
- 持仓时间>72小时
- 连续3次以上亏损

---

## 🚀 第五步：开始真实交易（1-2周后）

**只有当纸上交易表现良好时才进行！**

### 检查清单（必须全部打✅）

- [ ] 纸上交易测试至少1周
- [ ] 纸上交易胜率>50%
- [ ] 理解每个交易信号的含义
- [ ] 知道如何手动平仓
- [ ] 设置了Telegram通知
- [ ] 准备好每天检查账户
- [ ] 可以承受最坏情况（亏损$100）

### 启用实盘交易

1. **修改配置文件**：
```javascript
// src/statistical-arbitrage/config.js
{
  enableLiveTrading: true,   // 启用实盘
  autoTrade: false,          // ⚠️ 建议先手动交易
  ...
}
```

2. **设置API密钥**：
```bash
# 复制环境变量模板
cp env.example .env

# 编辑 .env 文件，填入你的API密钥
BINANCE_API_KEY=你的API密钥
BINANCE_SECRET=你的密钥
```

3. **⚠️ API权限设置（重要）**：
在交易所设置API权限时：
- ✅ 允许：现货交易、查询账户
- ❌ 禁止：提币权限
- ✅ 建议：绑定IP白名单

4. **启动实盘**：
```bash
npm run stat-arb
```

### 半自动交易模式（推荐新手）

当 `autoTrade: false` 时：
- 程序会显示交易信号
- 但不会自动下单
- 你需要**手动**在交易所下单

**优点**：
- 完全掌控每笔交易
- 可以检查价格再下单
- 避免程序错误导致损失

**操作流程**：
1. 程序显示 `🎯 OPEN_SHORT 信号`
2. 你登录交易所APP/网页
3. 手动买入/卖出相应数量
4. 在程序中确认

---

## 📱 第六步：日常监控

### 每天必做（5-10分钟）

**早上**：
1. 查看 `logs/trades.log`
2. 检查是否有新的交易
3. 查看持仓盈亏状态

**晚上**：
1. 复盘今天的交易
2. 计算当天盈亏
3. 记录在Excel/笔记本

### 每周必做（30分钟）

1. 统计本周数据：
   - 总交易次数
   - 盈利交易 vs 亏损交易
   - 总盈亏金额
   - 胜率

2. 对比回测表现：
   - 实盘胜率 vs 回测胜率
   - 实际滑点成本
   - 平均持仓时间

3. 调整策略（如果需要）：
   - 如果胜率<45%，暂停交易
   - 如果回撤>8%，减少仓位
   - 如果连续亏损，检查市场环境

---

## 🚨 紧急情况处理

### 场景1：程序崩溃/断网

**立即行动**：
1. 登录交易所查看持仓
2. 记录当前持仓信息
3. 手动监控，必要时手动平仓

**重启程序**：
- 程序会自动重新加载持仓（如果有持久化）
- 如果没有，需要手动在代码中标记持仓

### 场景2：亏损超过预期

**触发条件**：
- 单日亏损>$50
- 总回撤>10%

**应对措施**：
1. 立即平掉所有仓位
2. 暂停交易3-7天
3. 重新回测最近数据
4. 检查策略是否失效

### 场景3：市场剧烈波动

**识别标志**：
- BTC单日涨跌>10%
- 交易量暴增3倍以上
- Z-Score频繁触发

**应对措施**：
1. 手动暂停程序
2. 等待市场稳定（通常1-2天）
3. 观察相关性是否恢复
4. 稳定后再重启

---

## 📈 成功标准

### 第一个月目标

- 存活！不要亏损超过10%
- 熟悉整个流程
- 理解策略原理
- 胜率>50%

### 第二个月目标

- 稳定盈利2-5%
- 优化参数
- 增加到5-8个配对
- 考虑增加资金到$2K-$3K

### 第三个月目标

- 月收益5-8%
- 可以考虑增加到$5K-$10K
- 探索其他策略

---

## 💡 新手常见错误（必读！）

### ❌ 错误1：看到高收益就急于投入大资金

**正确做法**：
- 从$1K开始测试至少1个月
- 证明稳定盈利后再逐步增加
- 每次增资不超过50%

### ❌ 错误2：忽视风险控制

**正确做法**：
- 严格遵守止损规则
- 不要因为"快回本了"而不止损
- 回撤超过10%立即停止

### ❌ 错误3：频繁调整参数

**正确做法**：
- 至少运行2周再考虑调整
- 每次只调整一个参数
- 记录每次调整的效果

### ❌ 错误4：过度交易

**正确做法**：
- 相信策略，耐心等待信号
- 不要手动增加交易频率
- 每天交易次数<5次

### ❌ 错误5：孤注一掷

**正确做法**：
- $1K是测试金额，不是全部身家
- 只用闲钱交易
- 做好亏损心理准备

---

## 🎯 下一步行动

**现在就开始！**

```bash
# 1. 运行回测
npm run stat-arb:backtest

# 等待完成后...

# 2. 优化投资组合
npm run stat-arb:portfolio ./output/backtest_results_xxx.json 1000 conservative

# 3. 开始纸上交易（1-2周）
npm run stat-arb

# 4. 真实交易（测试成功后）
# 修改 config.js: enableLiveTrading: true
npm run stat-arb
```

---

## 📞 需要帮助？

遇到问题时：
1. 查看 `logs/error.log`
2. 阅读 `docs/LIVE_TRADING_GUIDE.md`
3. 检查 `docs/STATISTICAL_ARBITRAGE_GUIDE.md`

---

## ✅ 记住这些原则

1. **安全第一** - 设置严格的止损
2. **小额开始** - 证明可行再加码
3. **耐心等待** - 不要追求暴利
4. **持续学习** - 理解每笔交易
5. **风险意识** - 随时准备亏损

---

**🎓 欢迎来到统计套利的世界！**

记住：**稳定比快速更重要，活着比暴富更关键！**

祝你交易顺利！🚀

